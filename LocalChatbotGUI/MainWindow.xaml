<Window x:Class="LocalChatbotGUI.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="AI Chatbot" Height="700" Width="450"
        Background="#1E1E1E" Foreground="White"
        WindowStartupLocation="CenterScreen">
    
    <Window.Resources>
        <!-- ScrollBar Style (Simplified Dark) -->
        <Style TargetType="ScrollBar">
            <Setter Property="Background" Value="#2D2D2D"/>
        </Style>

        <!-- Message Bubble Data Template -->
        <DataTemplate x:Key="MessageTemplate">
            <Grid Margin="5">
                <Border CornerRadius="10" Padding="10" MaxWidth="350">
                    <Border.Style>
                        <Style TargetType="Border">
                            <Style.Triggers>
                                <!-- User Message Style -->
                                <DataTrigger Binding="{Binding IsUser}" Value="True">
                                    <Setter Property="Background" Value="#7B61FF"/>
                                    <Setter Property="HorizontalAlignment" Value="Right"/>
                                </DataTrigger>
                                <!-- Bot Message Style -->
                                <DataTrigger Binding="{Binding IsUser}" Value="False">
                                    <Setter Property="Background" Value="#333333"/>
                                    <Setter Property="HorizontalAlignment" Value="Left"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Border.Style>
                    <TextBlock Text="{Binding Content}" TextWrapping="Wrap" Foreground="White" FontSize="14"/>
                </Border>
            </Grid>
        </DataTemplate>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/> <!-- Header -->
            <RowDefinition Height="*"/>    <!-- Chat -->
            <RowDefinition Height="Auto"/> <!-- Input -->
        </Grid.RowDefinitions>

        <!-- Simple Custom Header -->
        <Border Background="#2D2D2D" Padding="15">
            <TextBlock Text="Local AI Chatbot" FontWeight="Bold" FontSize="16" Foreground="White" HorizontalAlignment="Center"/>
        </Border>

        <!-- Chat History -->
        <ScrollViewer x:Name="ScrollOutput" Grid.Row="1" Margin="10" VerticalScrollBarVisibility="Auto">
            <ItemsControl x:Name="ChatList" ItemTemplate="{StaticResource MessageTemplate}"/>
        </ScrollViewer>

        <!-- Input Area -->
        <Border Grid.Row="2" Background="#252526" Padding="15">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <TextBox x:Name="InputBox" 
                         Height="40" 
                         VerticalContentAlignment="Center"
                         Padding="10,0"
                         Background="#333333" 
                         Foreground="White" 
                         BorderThickness="0"
                         CaretBrush="White"
                         KeyDown="InputBox_KeyDown"/>
                
                <Button Grid.Column="1" 
                        Content="Send" 
                        Margin="10,0,0,0" 
                        Width="70" 
                        Background="#7B61FF" 
                        Foreground="White" 
                        BorderThickness="0"
                        Click="OnSendClick">
                    <Button.Resources>
                        <Style TargetType="Border">
                            <Setter Property="CornerRadius" Value="5"/>
                        </Style>
                    </Button.Resources>
                </Button>
            </Grid>
        </Border>
    </Grid>
</Window>
